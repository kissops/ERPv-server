{% extends "layouts/base.html" %}
{% block content %}
{% if request.user.is_authenticated %}
<div class="row">
    {% include "layouts/menu.html" %}
    <div class="col">
        <div class="card card-content">
            <div class="card-header bg-light py-4">
                <div class="d-flex justify-content-between">
                    <strong>{{ object.name }}</strong>
                    <a class="btn btn-sm btn-secondary" href="{% url 'customer_update' pk=object.pk %}">Edit</a>
                </div>
                <p class="my-3" style="text-transform: capitalize;">
                    {{ object.address|linebreaksbr }}
                </p>
                <p style="text-transform: uppercase;">{{ object.postcode }}</p>
            </div>
            <div class="container-fluid mb-4">
                <div class="row">
                    <div class="col">
                        <ul class="nav nav-tabs">
                            <li class="nav-item">
                                <a class="nav-link active" id="contacts-tab" data-toggle="tab" href="#contacts" role="tab" aria-controls="contacts" aria-selected="true" href="#">Contacts</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="po-tab" data-toggle="tab" href="#po" role="tab" aria-controls="po" aria-selected="false" href="#">Sales Orders</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="products-tab" data-toggle="tab" href="#products" role="tab" aria-controls="products" aria-selected="false" href="#">Supplied Product</a>
                            </li>
                        </ul>
                        <div class="card tab-content">
                            <div class="tab-pane active" id="contacts" role="tabpanel" aria-labelledby="contacts-tab">
                                <div class="card-header bg-secondary py-4">
                                    <strong>Contacts</strong>
                                </div>
                                <div class="card-body content">
                                    <div class="text-right">
                                        <a href="{% url 'sales_order_create' pk=object.pk %}" class="btn btn-sm btn-success">Create New</a>
                                    </div>

                                </div>
                            </div>
                            <div class="tab-pane" id="po" role="tabpanel" aria-labelledby="po-tab">
                                <div class="card-header bg-secondary py-4">
                                    <strong>Sales Orders</strong>
                                </div>
                                <div class="card-body content">
                                    <div class="text-right">
                                        <a href="{% url 'sales_order_create' pk=object.pk %}" class="btn btn-sm btn-success">Create New</a>
                                    </div>
                                    <div class="text-right mt-3 text-secondary headers">Ship by Date</div>
                                    <ul class="list-group list-group-flush">
                                        {% for obj in object.customer_sales_orders.all %}
                                        <a href="{% url 'customer_detail' pk=obj.pk %}" class="list-group-item list-group-item-action py-4">
                                            <div class="d-flex justify-content-between">
                                                <span class="mr-3">{{ obj.pk }}</span>
                                                {{ obj.ship_by|date:"D dS M Y" }}
                                            </div>
                                        </a>
                                        {% endfor %}
                                    </ul>
                                </div>
                            </div>
                            <div class="tab-pane" id="products" role="tabpanel" aria-labelledby="products-tab">
                                <div class="card-header bg-secondary py-4">
                                    <strong>Supplied Products</strong>
                                </div>
                                <div class="card-body content">
                                    <div class="text-right">
                                        <a href="{% url 'sales_order_create' pk=object.pk %}" class="btn btn-sm btn-success">Create New</a>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endif %}
{% endblock content %}
